{"version":3,"sources":["core.js","page.js","profilepage.js","quil-editor.js","search.js","util.js"],"names":["Array","prototype","selectWhere","func","newArr","forEach","item","push","firstWhere","Document","id","title","ownerId","isPublic","last_updated","created","content","lastUpdated","$","delay","fadeIn","fadeOut","on","notImplementedAlert","editCvHandler","e","newDocumentHandler","val","newDocumentRequest","descriptionSaveHandler","newIconHandler","documentEditHandler","theDocument","window","data","activeDocument","documents","x","initializeEditor","documentDeleteHandler","sendDocumentRemoveRequest","length","requestDocumentList","produceDocumentList","$documentList","empty","produceItem","doc","$newElem","append","ajax","url","type","contentType","JSON","stringify","document","success","result","console","log","error","err","modalAlert","docId","quill","Quill","modules","toolbar","placeholder","theme","saveDocument","oldDoc","contents","getText","prop","modal","$modalEditor","setText","text","searchRequest","searchString","serverSearchRequest","viewUserRequest","userId","populateResultList","results","$searchList","produceUserItem","user","produceDocumentItem","firstName","infixName","lastName","message","$modalAlert","find"],"mappings":"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","file":"scripts.js","sourcesContent":["\r\nArray.prototype.selectWhere = function(func){\r\n    var newArr = []\r\n    this.forEach(item => {\r\n        if (func(item))\r\n            newArr.push(item)\r\n    })\r\n    return newArr;\r\n}\r\n\r\nArray.prototype.firstWhere = function(func){\r\n    for(let item of this){\r\n        if (func(item))\r\n            return item;\r\n    }\r\n}\r\n\r\nfunction Document(id, title, ownerId, isPublic, last_updated, created, content){\r\n    this.id = id;\r\n    this.title = title;\r\n    this.ownerId = ownerId;\r\n    this.isPublic = isPublic;\r\n    this.lastUpdated = last_updated;\r\n    this.created = created;\r\n    this.content = content;\r\n}","$(function(){\r\n    $('#header-intro-text').delay(1000).fadeIn(500).delay(4000).fadeOut(500)\r\n\r\n\r\n\r\n    \r\n})","$(function(){\r\n\r\n    //Register Handlers\r\n\r\n    //$('#editcv').attr('onclick', 'editCvHandler(event)')\r\n    //$('#newdocument').attr('onclick', 'newDocumentHandler(event)')\r\n    //$('#description-save').attr('onclick', 'descriptionSaveHandler(event)')\r\n    //$('#newicon').attr('onclick', 'newIconHandler(event)')\r\n    //$('#document-edit').attr('onclick', 'documentEditHandler(event)')\r\n\r\n    $('#change-username').on('click', notImplementedAlert)\r\n    $('#change-firstname').on('click', notImplementedAlert)\r\n    $('#change-infixname').on('click', notImplementedAlert)\r\n    $('#change-lastname').on('click', notImplementedAlert)\r\n    $('#change-email').on('click', notImplementedAlert)\r\n\r\n})\r\n\r\n\r\nfunction editCvHandler(e){\r\n\r\n}\r\n\r\nfunction newDocumentHandler(e){\r\n    var title = $('#modal-newfile #newfile-title').val() || \"\"\r\n    newDocumentRequest(title)\r\n}\r\n\r\nfunction descriptionSaveHandler(e){\r\n\r\n}\r\n\r\nfunction newIconHandler(e){\r\n    \r\n}\r\n\r\nfunction documentEditHandler(e){\r\n    var theDocument = window.data.activeDocument = window.data.documents.firstWhere(x => x.id === e)\r\n\r\n    initializeEditor()\r\n}\r\n\r\nfunction documentDeleteHandler(e){\r\n    var theDocument = window.data.activeDocument = window.data.documents.firstWhere(x => x.id === e)\r\n\r\n    sendDocumentRemoveRequest(theDocument.id)\r\n}\r\n\r\n$(function(){\r\n    //if the page contains: #document-list, we must be on the profile page. So we need to request the document list:\r\n    if ($('#document-list').length > 0) {\r\n        requestDocumentList()\r\n    }\r\n    \r\n    \r\n\r\n})\r\n\r\n\r\n\r\nfunction produceDocumentList(documents){\r\n    var $documentList = $('#document-list')\r\n    $documentList.empty()\r\n    function produceItem(doc){\r\n        var $newElem = $(`<li class=\"list-group-item d-flex\">\r\n            ${doc.title}\r\n            <div class=\"mx-1\">\r\n                <!--Display a 'public' symbol--><i class=\"fa fa-${doc.isPublic ? 'users' : 'user'}\" aria-hidden=\"true\"></i>\r\n            </div>\r\n            <button class=\"btn btn-info ml-auto mx-2\" onclick=\"documentEditHandler(${doc.id})\" id=\"document-edit\">Edit</button>\r\n            <button class=\"btn btn-danger\" onclick=\"documentDeleteHandler(${doc.id})\" id=\"document-remove\">Remove</button>\r\n        </li>`)\r\n\r\n        $documentList.append($newElem)\r\n    }\r\n\r\n\r\n    documents.forEach(doc => { produceItem(doc) })\r\n\r\n}\r\n\r\n// HTTP Reqests:\r\n\r\nfunction newDocumentRequest(title){\r\n    $.ajax({\r\n        url: '/documents/adddocument',\r\n        type: 'POST',\r\n        contentType: 'application/json',\r\n        data: JSON.stringify({\r\n            document: {\r\n                title: title\r\n            }\r\n        }),\r\n        success: function(result){\r\n            console.log('succesfully created a new document!!!!!', result)\r\n            requestDocumentList()\r\n        },\r\n        error: function(err){\r\n            console.error(\"Failed to create New Document\");\r\n            modalAlert(\"Failed to create New Document\")\r\n            console.error(err)\r\n        }\r\n    })\r\n}\r\n\r\nfunction requestDocumentList(){\r\n    //Get Document List\r\n    $.ajax({\r\n        url: '/documents/mydocuments',\r\n        type: 'GET',\r\n        success: function(result){\r\n            //create global obj\r\n            window.data = window.data || {}\r\n            window.data.documents = result;\r\n            console.log('succesfully received new list of docs ', result)\r\n\r\n            produceDocumentList(result)\r\n        },\r\n        error: function(err){\r\n            console.error(\"Failed to retrive documents\");\r\n            console.error(err)\r\n            modalAlert(\"Failed to retrive documents\")\r\n        }\r\n    })\r\n    $('#document-list')\r\n}\r\n\r\nfunction sendDocumentRemoveRequest(docId){\r\n    $.ajax({\r\n        url: '/documents/removedocument',\r\n        type: 'POST',\r\n        contentType: 'application/json',\r\n        data: JSON.stringify({\r\n            document: {\r\n                id: docId\r\n            }\r\n        }),\r\n        success: function(result){\r\n            console.log('succesfully removed document')\r\n            requestDocumentList();\r\n            modalAlert(\"Removed\", \"Succesfully removed document\")\r\n        },\r\n        error: function(err){\r\n            console.error(\"Failed to Delete Document\");\r\n            modalAlert(\"Error\", \"Failed to Delete Document\")\r\n            console.error(err)\r\n        }\r\n    })\r\n}","$(function(){\r\n    window.quill = new Quill('#editor-container', {\r\n        modules: {\r\n            toolbar: true,\r\n        },\r\n        placeholder: 'Compose your Curriculum Vitae',\r\n        theme: 'snow'  // or 'bubble'\r\n    })\r\n    console.log('hello from quill', window.quill)\r\n})\r\n\r\n\r\nfunction saveDocument(e){\r\n    var oldDoc = window.data.activeDocument\r\n\r\n    var contents = {\"text\": window.quill.getText()} \r\n    \r\n\r\n    console.log('contents:', contents)\r\n    var title = $('#document-title').val()\r\n    var isPublic = $('#document-ispublic').prop(\"checked\");\r\n\r\n    var doc = new Document(oldDoc.id, title, oldDoc.ownerId, isPublic, oldDoc.lastUpdated, oldDoc.created, contents)\r\n    window.data.activeDocument = doc;\r\n\r\n    $.ajax({\r\n        url: '/documents/updatedocument',\r\n        type: 'POST',\r\n        data: JSON.stringify({document: doc}),\r\n        contentType: 'application/json',\r\n        success: function(result){\r\n            console.log('successs !!!')\r\n            $('#modal-editor').modal('hide')\r\n            requestDocumentList()\r\n        },\r\n        error: function(err){\r\n            console.error(\"Failed to create New Document\");\r\n            modalAlert(\"Failed to create New Document\")\r\n            console.error(err)\r\n        }\r\n    })\r\n}\r\n\r\nfunction initializeEditor(){\r\n\r\n    var $modalEditor = $('#modal-editor')\r\n    window.quill.setText(window.data.activeDocument.content.text);\r\n    $('#document-title').val(window.data.activeDocument.title)\r\n    $('#document-ispublic').prop(\"checked\", window.data.activeDocument.isPublic)\r\n    $modalEditor.modal('show');\r\n}","function searchRequest(){\r\n    var searchString = $('#search-input').val();\r\n    if (searchString === \"\") return;\r\n    \r\n    serverSearchRequest(searchString)\r\n}\r\n\r\nfunction viewUserRequest(userId){\r\n    notImplementedAlert();\r\n}\r\n\r\nfunction populateResultList(results){\r\n    console.log('building a list of results', results)\r\n\r\n    var $searchList = $('#search-results')\r\n    $searchList.empty() // Clear the list\r\n    // Build list of Users\r\n    \r\n    if (results[0].length === 0 && results[1].length === 0){\r\n        $searchList.append($(`<li class=\"list-group-item\"><h3>Nothing Found</h3></li>`))\r\n        return;\r\n    }\r\n\r\n    if (results[1].length > 0){\r\n        $searchList.append($(`<li class=\"list-group-item\"><h3>Users:&nbsp;</h3></li>`))\r\n        results[1].forEach(user => {\r\n            produceUserItem(user)\r\n        })\r\n    }\r\n    if (results[0].length > 0){\r\n        $searchList.append($(`<li class=\"list-group-item\"><h3>Documents:&nbsp;</h3></li>`))\r\n        results[0].forEach(doc => {\r\n            produceDocumentItem(doc)\r\n        })\r\n    }\r\n\r\n    function produceUserItem(user){\r\n        var $newElem = $(`<li class=\"list-group-item d-flex\">\r\n            <p class=\"lead\">${user.firstName} ${user.infixName} ${user.lastName}</p>\r\n            <button class=\"btn btn-info ml-auto mx-2\" onclick=\"documentEditHandler(${user.id})\" id=\"document-edit\">View</button>\r\n        </li>`)\r\n\r\n        $searchList.append($newElem)\r\n    }\r\n    \r\n    function produceDocumentItem(document){\r\n        var $newElem = $(`<li class=\"list-group-item d-flex\">\r\n            <p class=\"lead\">${document.title}</p>\r\n            <button class=\"btn btn-info ml-auto mx-2\" onclick=\"documentEditHandler(${document.id})\" id=\"document-edit\">View</button>\r\n        </li>`)\r\n\r\n        $searchList.append($newElem)\r\n    }\r\n}\r\n\r\nfunction serverSearchRequest(searchString){\r\n    $.ajax({\r\n        url: '/search',\r\n        type: 'POST',\r\n        contentType: 'application/json',\r\n        data: JSON.stringify({\r\n            searchString\r\n        }),\r\n        success: function(result){\r\n            console.log('succesfully searched for users and documents!!!!!', result)\r\n            populateResultList(result)\r\n        },\r\n        error: function(err){\r\n            console.error(\"Failed to search for users and documents\");\r\n            modalAlert(\"Failed to search for users and documents.\")\r\n            console.error(err)\r\n        }\r\n    })\r\n}","function modalAlert(title, message){\r\n    var $modalAlert = $('#modal-alert')\r\n    $modalAlert.find('.modal-title').text(title)\r\n    $modalAlert.find('.modal-body').text(message)\r\n    $modalAlert.modal('show').delay(4000).modal('hide')\r\n}\r\n\r\nfunction notImplementedAlert(){\r\n    modalAlert(\"Sorry\", \"This Feature is not yet implemented\")\r\n}\r\n"]}